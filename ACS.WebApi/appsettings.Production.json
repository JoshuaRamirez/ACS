{
  "Logging": {
    "LogLevel": {
      "Default": "Warning",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.EntityFrameworkCore": "Warning",
      "ACS": "Information"
    },
    "ApplicationInsights": {
      "LogLevel": {
        "Default": "Information"
      }
    }
  },
  "Environment": "Production",
  "ConnectionStrings": {
    "DefaultConnection": "${DATABASE_URL}",
    "Redis": "${REDIS_URL}"
  },
  "Authentication": {
    "Jwt": {
      "SecretKey": "${JWT_SECRET}",
      "Issuer": "${JWT_ISSUER:ACS.WebApi}",
      "Audience": "${JWT_AUDIENCE:ACS.VerticalHost}",
      "ExpirationHours": "${JWT_EXPIRATION_HOURS:8}"
    }
  },
  "KeyVault": {
    "VaultUri": "${AZURE_KEY_VAULT_URI}",
    "ClientId": "${AZURE_CLIENT_ID}",
    "ClientSecret": "${AZURE_CLIENT_SECRET}",
    "TenantId": "${AZURE_TENANT_ID}",
    "LoadAllSecrets": true,
    "Optional": false
  },
  "ApplicationInsights": {
    "InstrumentationKey": "${APPINSIGHTS_INSTRUMENTATIONKEY}",
    "ConnectionString": "${APPLICATIONINSIGHTS_CONNECTION_STRING}"
  },
  "RateLimit": {
    "Enabled": true,
    "UseDistributedStorage": true,
    "DefaultPolicy": {
      "RequestLimit": 100,
      "WindowSizeSeconds": 60
    },
    "EndpointPolicies": [
      {
        "PathPattern": "/api/auth/login",
        "HttpMethods": ["POST"],
        "RequestLimit": 3,
        "WindowSizeSeconds": 300
      }
    ],
    "Storage": {
      "Type": "Redis",
      "KeyPrefix": "rl:",
      "CleanupIntervalMinutes": 10,
      "MaxCacheEntries": 100000
    }
  },
  "HealthChecks": {
    "EnablePeriodicChecks": true,
    "CheckIntervalSeconds": 60,
    "InitialDelaySeconds": 30
  },
  "Database": {
    "Backup": {
      "DefaultPath": "${BACKUP_PATH:/mnt/backups/acs}",
      "Schedule": {
        "Enabled": true,
        "FullBackup": {
          "Enabled": true,
          "ScheduleType": "Weekly",
          "WeeklyOn": "Sunday",
          "WeeklyAt": "02:00:00"
        },
        "DifferentialBackup": {
          "Enabled": true,
          "ScheduleType": "Daily",
          "DailyAt": "02:00:00"
        }
      }
    },
    "Performance": {
      "EnableSensitiveDataLogging": false,
      "EnableDetailedErrors": false,
      "EnableThreadSafetyChecks": false,
      "EnableConnectionPooling": true,
      "MinPoolSize": 20,
      "MaxPoolSize": 200
    }
  },
  "DataArchiving": {
    "ArchivePath": "${ARCHIVE_PATH:/mnt/archives/acs}",
    "Schedule": {
      "Enabled": true,
      "ArchiveSchedule": {
        "Enabled": true,
        "RetentionDays": 90
      },
      "PurgeSchedule": {
        "Enabled": true,
        "RetentionDays": 365
      },
      "ComplianceReportSchedule": {
        "Enabled": true,
        "EmailRecipients": ["${COMPLIANCE_EMAIL:compliance@company.com}"]
      },
      "RetentionCheckSchedule": {
        "Enabled": true,
        "AutoRemediate": true
      }
    }
  },
  "IndexMaintenance": {
    "AnalysisIntervalHours": 24,
    "AutoRebuildEnabled": true,
    "AutoReorganizeEnabled": true,
    "MaintenanceWindowStart": "02:00:00",
    "MaintenanceWindowEnd": "05:00:00"
  },
  "Monitoring": {
    "EnableMetrics": true,
    "EnableDashboards": false,
    "EnablePrometheusEndpoint": true
  },
  "OpenTelemetry": {
    "Exporter": "Otlp",
    "MetricsExporter": "Otlp",
    "OtlpEndpoint": "${OTEL_EXPORTER_OTLP_ENDPOINT}",
    "ServiceName": "${OTEL_SERVICE_NAME:ACS.WebApi}"
  },
  "Alerting": {
    "Channels": {
      "Email": {
        "SmtpHost": "${SMTP_HOST}",
        "SmtpPort": "${SMTP_PORT:587}",
        "EnableSsl": true,
        "FromAddress": "${SMTP_FROM:alerts@company.com}",
        "Username": "${SMTP_USERNAME}",
        "Password": "${SMTP_PASSWORD}"
      },
      "Slack": {
        "DefaultWebhookUrl": "${SLACK_WEBHOOK_URL}"
      }
    }
  },
  "Diagnostics": {
    "EnableDiagnosticEndpoints": false,
    "EnableMemoryDumps": false,
    "EnableStackTraces": false
  },
  "Swagger": {
    "Enabled": false
  },
  "Cors": {
    "AllowedOrigins": ["${CORS_ORIGINS:https://app.company.com}"],
    "AllowedMethods": ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
    "AllowedHeaders": ["Authorization", "Content-Type", "X-Correlation-Id"],
    "AllowCredentials": true
  },
  "FeatureFlags": {
    "EnableDebugEndpoints": false,
    "EnableTestData": false,
    "EnableVerboseLogging": false,
    "EnableDeveloperExceptions": false
  },
  "Security": {
    "RequireHttps": true,
    "Hsts": {
      "MaxAge": 31536000,
      "IncludeSubdomains": true,
      "Preload": true
    },
    "ContentSecurityPolicy": {
      "Enabled": true,
      "PolicyString": "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:;"
    }
  }
}