{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "ACS.Infrastructure.Logging": "Debug"
    },
    "Console": {
      "IncludeScopes": true,
      "TimestampFormat": "yyyy-MM-dd HH:mm:ss.fff ",
      "LogToStandardErrorThreshold": "Error"
    },
    "StructuredLogging": {
      "Enabled": true,
      "IncludeCorrelationId": true,
      "IncludeRequestPath": true,
      "IncludeUserContext": true,
      "IncludeTimestamp": true,
      "Format": "Json"
    }
  },
  "AllowedHosts": "*",
  "OpenTelemetry": {
    "Exporter": "Console",
    "MetricsExporter": "Console",
    "OtlpEndpoint": "http://localhost:4317"
  },
  "PerformanceMetrics": {
    "CollectionIntervalMs": 5000,
    "EnableSystemMetrics": true,
    "EnableApplicationMetrics": true,
    "EnableDatabaseMetrics": false,
    "EnableCacheMetrics": false,
    "EnableGrpcMetrics": true,
    "RetentionDays": 30
  },
  "Authentication": {
    "Jwt": {
      "SecretKey": "",
      "Issuer": "ACS.WebApi",
      "Audience": "ACS.VerticalHost",
      "ExpirationHours": 24
    }
  },
  "RateLimit": {
    "Enabled": true,
    "KeyStrategy": "Combined",
    "DefaultPolicy": {
      "RequestLimit": 100,
      "WindowSizeSeconds": 60,
      "Algorithm": "SlidingWindow",
      "UseDistributedStorage": false,
      "PolicyName": "default",
      "Priority": 1
    },
    "TenantPolicies": {
      "tenant1": {
        "RequestLimit": 200,
        "WindowSizeSeconds": 60,
        "Algorithm": "SlidingWindow",
        "UseDistributedStorage": false,
        "PolicyName": "tenant1_enhanced",
        "Priority": 2
      },
      "tenant2": {
        "RequestLimit": 50,
        "WindowSizeSeconds": 60,
        "Algorithm": "SlidingWindow",
        "UseDistributedStorage": false,
        "PolicyName": "tenant2_basic",
        "Priority": 1
      }
    },
    "EndpointPolicies": [
      {
        "PathPattern": "/api/auth/login",
        "HttpMethods": ["POST"],
        "RequestLimit": 5,
        "WindowSizeSeconds": 300,
        "Algorithm": "SlidingWindow",
        "PolicyName": "auth_login",
        "Description": "Strict rate limiting for login attempts"
      },
      {
        "PathPattern": "/api/users",
        "HttpMethods": ["GET"],
        "RequestLimit": 1000,
        "WindowSizeSeconds": 60,
        "Algorithm": "SlidingWindow",
        "PolicyName": "users_read",
        "Description": "Higher limits for read operations"
      },
      {
        "PathPattern": "/api/users",
        "HttpMethods": ["POST", "PUT", "DELETE"],
        "RequestLimit": 20,
        "WindowSizeSeconds": 60,
        "Algorithm": "SlidingWindow",
        "PolicyName": "users_write",
        "Description": "Conservative limits for write operations"
      }
    ],
    "ExcludePaths": [
      "/health",
      "/metrics",
      "/swagger",
      "/api/health"
    ],
    "Storage": {
      "Type": "InMemory",
      "KeyPrefix": "rl:",
      "CleanupIntervalMinutes": 5,
      "MaxCacheEntries": 10000
    },
    "Monitoring": {
      "IntervalMinutes": 2,
      "CleanupIntervalMinutes": 10,
      "AlertThreshold": 0.7
    }
  },
  "ConnectionStrings": {
    "DefaultConnection": "Server=(localdb)\\MSSQLLocalDB;Database=ACS_Development;Trusted_Connection=true;MultipleActiveResultSets=true",
    "Redis": "localhost:6379"
  },
  "Compression": {
    "EnableCompression": true,
    "EnableBrotli": true,
    "EnableGzip": true,
    "MinSizeToCompress": 1024,
    "MaxSizeToCompress": 10485760,
    "Brotli": {
      "Level": "Optimal"
    },
    "Gzip": {
      "Level": "Optimal"
    }
  },
  "Minification": {
    "EnableMinification": true,
    "MinifyInDevelopment": false,
    "MinifyJson": true,
    "MinifyJavaScript": true,
    "MinifyCss": true,
    "MinifyHtml": true
  },
  "Bundling": {
    "EnableBundling": true,
    "EnableMinification": true,
    "MinifyInDevelopment": false,
    "CacheMinutes": 60,
    "Bundles": [
      {
        "Name": "app-js",
        "Type": "JavaScript",
        "Files": [
          "/js/app.js",
          "/js/services.js",
          "/js/controllers.js"
        ]
      },
      {
        "Name": "app-css",
        "Type": "Css",
        "Files": [
          "/css/site.css",
          "/css/theme.css"
        ]
      }
    ]
  },
  "Performance": {
    "EnableQueryOptimization": true,
    "EnableCaching": true,
    "DefaultPageSize": 20,
    "MaxPageSize": 100
  },
  "HealthChecks": {
    "EnablePeriodicChecks": true,
    "CheckIntervalSeconds": 60,
    "InitialDelaySeconds": 10,
    "MaxHistoryEntries": 100,
    "GrpcServices": ["AccessControl", "TenantService"],
    "DiskSpace": {
      "MinimumFreeMB": 1024,
      "WarningThresholdPercent": 10
    },
    "Memory": {
      "MaxMemoryMB": 2048,
      "WarningThresholdPercent": 80
    },
    "ExternalServices": {
      "AuthService": {
        "Endpoint": "https://auth.example.com/health",
        "TimeoutSeconds": 5,
        "ExpectedStatusCode": 200
      }
    }
  },
  "HealthChecksUI": {
    "Endpoints": [
      {
        "Name": "Main API",
        "Uri": "/health"
      },
      {
        "Name": "Tenant Service",
        "Uri": "http://localhost:5002/health"
      }
    ]
  },
  "Database": {
    "Backup": {
      "DefaultPath": "C:\\Backups\\ACS",
      "Schedule": {
        "Enabled": true,
        "FullBackup": {
          "Enabled": true,
          "ScheduleType": "Weekly",
          "WeeklyOn": "Sunday",
          "WeeklyAt": "02:00:00",
          "BackupPath": "C:\\Backups\\ACS\\Full",
          "Compress": true,
          "UseNativeCompression": true,
          "VerifyAfterBackup": true,
          "TimeoutSeconds": 3600,
          "RetryOnFailure": true,
          "RetryCount": 3,
          "RetryDelayMinutes": 5,
          "SendSuccessAlerts": false
        },
        "DifferentialBackup": {
          "Enabled": true,
          "ScheduleType": "Daily",
          "DailyAt": "02:00:00",
          "BackupPath": "C:\\Backups\\ACS\\Differential",
          "Compress": true,
          "UseNativeCompression": true,
          "VerifyAfterBackup": true,
          "TimeoutSeconds": 1800,
          "RetryOnFailure": true,
          "RetryCount": 2,
          "RetryDelayMinutes": 5,
          "SendSuccessAlerts": false
        },
        "TransactionLogBackup": {
          "Enabled": false,
          "ScheduleType": "Interval",
          "IntervalHours": 1,
          "BackupPath": "C:\\Backups\\ACS\\TransactionLog",
          "Compress": true,
          "UseNativeCompression": true,
          "VerifyAfterBackup": false,
          "TimeoutSeconds": 600,
          "RetryOnFailure": true,
          "RetryCount": 1,
          "RetryDelayMinutes": 2,
          "SendSuccessAlerts": false
        },
        "CleanupSchedule": {
          "Enabled": true,
          "ScheduleType": "Daily",
          "DailyAt": "03:00:00",
          "RetentionDays": 30
        }
      }
    },
    "Performance": {
      "EnableConnectionPooling": true,
      "MinPoolSize": 10,
      "MaxPoolSize": 100,
      "ConnectionLifetimeSeconds": 300,
      "CommandTimeoutSeconds": 30,
      "EnableMultipleActiveResultSets": true,
      "MaxRetryCount": 5,
      "MaxRetryDelaySeconds": 30,
      "EnableQuerySplitting": true,
      "EnableChangeTracking": false,
      "UseRowNumberForPaging": true,
      "EnableServiceProviderCaching": true,
      "EnableSensitiveDataLogging": false,
      "EnableThreadSafetyChecks": true
    },
    "Batching": {
      "EnableBatching": true,
      "MinBatchSize": 2,
      "MaxBatchSize": 100,
      "BatchTimeoutMs": 1000
    }
  },
  "Monitoring": {
    "EnableMetrics": true,
    "MetricsRetentionHours": 24,
    "EnableDashboards": true,
    "DashboardRefreshSeconds": 30,
    "EnablePrometheusEndpoint": true,
    "EnableRealTimeStream": true,
    "Alerts": {
      "ErrorRateThreshold": 5.0,
      "ResponseTimeThreshold": 1000,
      "MemoryUsageThreshold": 80.0,
      "CpuUsageThreshold": 80.0
    }
  },
  "Diagnostics": {
    "EnableDiagnosticEndpoints": true,
    "MemoryDumpPath": "C:\\temp\\dumps",
    "MaxDumpFiles": 10,
    "AutoCleanupDays": 7,
    "PerformanceCounters": {
      "EnableCustomCounters": true,
      "CollectionIntervalSeconds": 30
    },
    "Export": {
      "DefaultFormat": "Json",
      "EnableStackTraces": false,
      "EnableMemoryDumps": false,
      "MaxExportSizeMB": 100
    }
  },
  "Alerting": {
    "Throttling": {
      "Emergency": {
        "WindowMinutes": 1,
        "MaxOccurrences": 3
      },
      "Critical": {
        "WindowMinutes": 5,
        "MaxOccurrences": 2
      },
      "Warning": {
        "WindowMinutes": 15,
        "MaxOccurrences": 1
      },
      "Info": {
        "WindowMinutes": 60,
        "MaxOccurrences": 1
      }
    },
    "Channels": {
      "Email": {
        "SmtpHost": "localhost",
        "SmtpPort": 587,
        "EnableSsl": true,
        "FromAddress": "alerts@yourcompany.com",
        "FromName": "ACS Alert System",
        "Username": "",
        "Password": ""
      },
      "Slack": {
        "DefaultWebhookUrl": "https://hooks.slack.com/services/YOUR/WEBHOOK/URL",
        "Webhooks": {
          "alerts": "https://hooks.slack.com/services/YOUR/ALERTS/WEBHOOK",
          "critical": "https://hooks.slack.com/services/YOUR/CRITICAL/WEBHOOK"
        }
      }
    },
    "Routing": {
      "Emergency": ["Email", "Slack"],
      "Critical": ["Email", "Slack"],
      "Warning": ["Slack"],
      "Info": ["Slack"]
    },
    "DefaultTargets": {
      "Email": ["admin@yourcompany.com", "ops@yourcompany.com"],
      "Slack": ["alerts", "ops-notifications"]
    }
  },
  "HealthCheckAlerting": {
    "CheckInterval": "00:01:00",
    "ConsecutiveFailureThreshold": 1,
    "SendRecoveryAlerts": true,
    "DisabledChecks": []
  },
  "DataArchiving": {
    "ArchivePath": "C:\\Archives\\ACS",
    "Schedule": {
      "Enabled": true,
      "ArchiveSchedule": {
        "Enabled": true,
        "ScheduleType": "Weekly",
        "WeeklyOn": "Sunday",
        "WeeklyAt": "02:00:00",
        "ArchiveType": "All",
        "RetentionDays": 90,
        "CompressArchive": true,
        "DeleteAfterArchive": false,
        "VerifyArchive": true,
        "SendNotifications": true
      },
      "PurgeSchedule": {
        "Enabled": true,
        "ScheduleType": "Monthly",
        "MonthlyDay": 1,
        "MonthlyAt": "03:00:00",
        "RetentionDays": 365,
        "TablesToPurge": ["AuditLogs", "SystemLogs", "ErrorLogs"],
        "CreateBackupBeforePurge": true,
        "ArchiveBeforePurge": true,
        "UpdateStatisticsAfterPurge": true,
        "BatchSize": 1000
      },
      "ComplianceReportSchedule": {
        "Enabled": true,
        "ScheduleType": "Monthly",
        "MonthlyDay": 1,
        "MonthlyAt": "06:00:00",
        "ComplianceType": "All",
        "ReportPeriod": "monthly",
        "ExportFormat": "Pdf",
        "IncludeDetails": true,
        "EmailRecipients": ["compliance@yourcompany.com"]
      },
      "RetentionCheckSchedule": {
        "Enabled": true,
        "ScheduleType": "Daily",
        "DailyAt": "01:00:00",
        "AutoRemediate": false,
        "DefaultRetentionDays": 90,
        "CriticalThreshold": 100000
      }
    }
  },
  "IndexMaintenance": {
    "AnalysisIntervalHours": 24,
    "FragmentationThreshold": 30.0,
    "UnusedIndexDaysThreshold": 30,
    "MaintenanceWindowStart": "02:00:00",
    "MaintenanceWindowEnd": "05:00:00",
    "AutoRebuildEnabled": false,
    "AutoReorganizeEnabled": true
  }
}
